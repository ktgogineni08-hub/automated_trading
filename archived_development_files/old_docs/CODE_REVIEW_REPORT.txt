================================================================================
COMPREHENSIVE CODE REVIEW REPORT
================================================================================

STATISTICS:
  Files Checked:    33
  Lines Checked:    12,532
  Issues Found:     238
    Critical:       0
    High:           12
    Medium:         0
    Low:            208

================================================================================
HIGH SEVERITY ISSUES (12)
================================================================================

File: /Users/gogineni/Python/trading-system/data/provider.py
Line: 100
Category: threading
Message: Mutable default argument - can cause threading issues
Code: df = df.rename(columns={

File: /Users/gogineni/Python/trading-system/core/trading_system.py
Line: 1111
Category: threading
Message: Mutable default argument - can cause threading issues
Code: positions={}

File: /Users/gogineni/Python/trading-system/core/trading_system.py
Line: 0
Category: threading
Message: Threading used without locks - potential race conditions

File: /Users/gogineni/Python/trading-system/core/transaction.py
Line: 0
Category: threading
Message: Threading used without locks - potential race conditions

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 921
Category: threading
Message: Mutable default argument - can cause threading issues
Code: market_conditions={

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 963
Category: threading
Message: Mutable default argument - can cause threading issues
Code: logger.logger.info(f"üìä {symbol}: shares={current_shares}, exit_price=‚Çπ{exit_price:.2f}")

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1546
Category: threading
Message: Mutable default argument - can cause threading issues
Code: logger.logger.debug(f"Order context for {symbol}: exchange={exchange}, product={product}")

File: /Users/gogineni/Python/trading-system/fno/strategies.py
Line: 73
Category: threading
Message: Mutable default argument - can cause threading issues
Code: logger.logger.info(f"Straddle analysis: Premium={total_premium:.2f}, Expected Move={expected_move:.2f}, Confidence={confidence:.2%}")

File: /Users/gogineni/Python/trading-system/fno/strategies.py
Line: 187
Category: threading
Message: Mutable default argument - can cause threading issues
Code: logger.logger.info(f"Iron Condor analysis: Credit={net_credit:.2f}, Max Profit={max_profit:.2f}, Max Loss={max_loss:.2f}, RR={risk_reward:.2f}")

File: /Users/gogineni/Python/trading-system/fno/data_provider.py
Line: 827
Category: threading
Message: Mutable default argument - can cause threading issues
Code: logger.logger.debug(f"‚úÖ Updated {option.symbol} with live data: price=‚Çπ{option.last_price:.2f}, oi={option.open_interest}")

File: /Users/gogineni/Python/trading-system/fno/strategy_selector.py
Line: 784
Category: threading
Message: Mutable default argument - can cause threading issues
Code: logger.logger.info(f"Butterfly calculation: Strike diff={strike_diff}, Net debit={net_debit}, Max profit={max_profit}, Max loss={max_loss}")

File: /Users/gogineni/Python/trading-system/utilities/logger.py
Line: 78
Category: threading
Message: Mutable default argument - can cause threading issues
Code: self.logger.log(25, trade_msg, extra={'trade_details': details})

================================================================================
LOW SEVERITY ISSUES (226)
================================================================================

File: /Users/gogineni/Python/trading-system/strategies/moving_average.py
Line: 69
Category: maintainability
Message: Magic number - consider using named constant
Code: strength = min(separation * 100, 1.0)

File: /Users/gogineni/Python/trading-system/strategies/moving_average.py
Line: 76
Category: maintainability
Message: Magic number - consider using named constant
Code: elif currently_above and separation > 0.003:

File: /Users/gogineni/Python/trading-system/strategies/moving_average.py
Line: 78
Category: maintainability
Message: Magic number - consider using named constant
Code: elif not currently_above and separation > 0.003:

File: /Users/gogineni/Python/trading-system/strategies/rsi.py
Line: 65
Category: maintainability
Message: Magic number - consider using named constant
Code: rsi = 100 - (100 / (1 + rs))

File: /Users/gogineni/Python/trading-system/strategies/rsi.py
Line: 80
Category: maintainability
Message: Magic number - consider using named constant
Code: strength = max(0, (current_rsi - self.overbought) / (100 - self.overbought))

File: /Users/gogineni/Python/trading-system/strategies/bollinger.py
Line: 79
Category: maintainability
Message: Magic number - consider using named constant
Code: strength = min((current_lower - current_price) / current_lower * 100, 1.0)

File: /Users/gogineni/Python/trading-system/strategies/bollinger.py
Line: 87
Category: maintainability
Message: Magic number - consider using named constant
Code: strength = min((current_price - current_upper) / current_upper * 100, 1.0)

File: /Users/gogineni/Python/trading-system/strategies/momentum.py
Line: 95
Category: documentation
Message: Missing docstring
Code: def _calculate_macd(self, data: pd.DataFrame, fast_period: int = 12,

File: /Users/gogineni/Python/trading-system/strategies/momentum.py
Line: 156
Category: documentation
Message: Missing docstring
Code: def _calculate_signal_strength(self, momentum: float, rsi: float, roc: float,

File: /Users/gogineni/Python/trading-system/strategies/momentum.py
Line: 32
Category: maintainability
Message: Magic number - consider using named constant
Code: - Momentum threshold: 0.015 (1.5%)

File: /Users/gogineni/Python/trading-system/strategies/momentum.py
Line: 33
Category: maintainability
Message: Magic number - consider using named constant
Code: - Acceleration threshold: 0.003 (0.3%)

File: /Users/gogineni/Python/trading-system/strategies/momentum.py
Line: 51
Category: maintainability
Message: Magic number - consider using named constant
Code: momentum_threshold: float = 0.015,

File: /Users/gogineni/Python/trading-system/strategies/momentum.py
Line: 52
Category: maintainability
Message: Magic number - consider using named constant
Code: acceleration_threshold: float = 0.003,

File: /Users/gogineni/Python/trading-system/strategies/momentum.py
Line: 79
Category: maintainability
Message: Magic number - consider using named constant
Code: rsi = 100 - (100 / (1 + rs))

File: /Users/gogineni/Python/trading-system/strategies/momentum.py
Line: 180
Category: maintainability
Message: Magic number - consider using named constant
Code: macd_threshold = 0.001

File: /Users/gogineni/Python/trading-system/strategies/volume_breakout.py
Line: 25
Category: maintainability
Message: Magic number - consider using named constant
Code: - Price threshold: 0.001 (0.1% price change)

File: /Users/gogineni/Python/trading-system/strategies/volume_breakout.py
Line: 35
Category: maintainability
Message: Magic number - consider using named constant
Code: def __init__(self, volume_multiplier: float = 1.3, price_threshold: float = 0.001):

File: /Users/gogineni/Python/trading-system/infrastructure/rate_limiting.py
Line: 22
Category: maintainability
Message: Magic number - consider using named constant
Code: - 1000 requests per minute

File: /Users/gogineni/Python/trading-system/infrastructure/caching.py
Line: 115
Category: documentation
Message: Missing docstring
Code: def cleanup_worker():

File: /Users/gogineni/Python/trading-system/infrastructure/caching.py
Line: 32
Category: maintainability
Message: Magic number - consider using named constant
Code: def __init__(self, max_size: int = 1000, ttl_seconds: int = 60):

File: /Users/gogineni/Python/trading-system/infrastructure/caching.py
Line: 149
Category: maintainability
Message: Magic number - consider using named constant
Code: hit_rate = (self.hits / total_requests * 100) if total_requests > 0 else 0

File: /Users/gogineni/Python/trading-system/data/provider.py
Line: 59
Category: documentation
Message: Missing docstring
Code: def fetch_with_retry(self, symbol: str, interval: str = "5minute",

File: /Users/gogineni/Python/trading-system/data/provider.py
Line: 200
Category: documentation
Message: Missing docstring
Code: def get_enhanced_technical_signals(

File: /Users/gogineni/Python/trading-system/data/provider.py
Line: 48
Category: maintainability
Message: Magic number - consider using named constant
Code: self.price_cache = LRUCacheWithTTL(max_size=1000, ttl_seconds=60)

File: /Users/gogineni/Python/trading-system/core/regime_detector.py
Line: 55
Category: documentation
Message: Missing docstring
Code: def detect_regime(

File: /Users/gogineni/Python/trading-system/core/regime_detector.py
Line: 144
Category: documentation
Message: Missing docstring
Code: def _load_price_data(

File: /Users/gogineni/Python/trading-system/core/regime_detector.py
Line: 110
Category: maintainability
Message: Magic number - consider using named constant
Code: slope_threshold = 0.0005

File: /Users/gogineni/Python/trading-system/core/regime_detector.py
Line: 199
Category: maintainability
Message: Magic number - consider using named constant
Code: plus_di = 100 * (plus_dm.ewm(alpha=1 / self.adx_window, adjust=False).mean() / atr.replace(0, np.nan))

File: /Users/gogineni/Python/trading-system/core/regime_detector.py
Line: 200
Category: maintainability
Message: Magic number - consider using named constant
Code: minus_di = 100 * (minus_dm.ewm(alpha=1 / self.adx_window, adjust=False).mean() / atr.replace(0, np.nan))

File: /Users/gogineni/Python/trading-system/core/regime_detector.py
Line: 203
Category: maintainability
Message: Magic number - consider using named constant
Code: dx = 100 * (plus_di - minus_di).abs() / (plus_di + minus_di).replace(0, np.nan)

File: /Users/gogineni/Python/trading-system/core/trading_system.py
Line: 200
Category: documentation
Message: Missing docstring
Code: def _normalize_fast_interval(interval: str) -> str:

File: /Users/gogineni/Python/trading-system/core/trading_system.py
Line: 214
Category: documentation
Message: Missing docstring
Code: def _interval_to_pandas(interval: str) -> str:

File: /Users/gogineni/Python/trading-system/core/trading_system.py
Line: 413
Category: documentation
Message: Missing docstring
Code: def _calculate_atr(self, df: pd.DataFrame, period: int = 14) -> float:

File: /Users/gogineni/Python/trading-system/core/trading_system.py
Line: 429
Category: documentation
Message: Missing docstring
Code: def _restore_saved_state(self) -> None:

File: /Users/gogineni/Python/trading-system/core/trading_system.py
Line: 469
Category: documentation
Message: Missing docstring
Code: def _serialize_cooldowns(self) -> Dict:

File: /Users/gogineni/Python/trading-system/core/trading_system.py
Line: 476
Category: documentation
Message: Missing docstring
Code: def _build_state_snapshot(self, iteration: int, total_value: float, price_map: Dict) -> Dict:

File: /Users/gogineni/Python/trading-system/core/trading_system.py
Line: 491
Category: documentation
Message: Missing docstring
Code: def _persist_state(self, iteration: int, total_value: float, price_map: Dict) -> None:

File: /Users/gogineni/Python/trading-system/core/trading_system.py
Line: 505
Category: documentation
Message: Missing docstring
Code: def _broadcast_restored_state(self) -> None:

File: /Users/gogineni/Python/trading-system/core/trading_system.py
Line: 957
Category: documentation
Message: Missing docstring
Code: def _close_positions_for_day(self, price_map: Dict, iteration: int, current_day: str) -> bool:

File: /Users/gogineni/Python/trading-system/core/trading_system.py
Line: 88
Category: maintainability
Message: Magic number - consider using named constant
Code: if state_data.get('cash', 1000000) != 1000000:

File: /Users/gogineni/Python/trading-system/core/trading_system.py
Line: 128
Category: maintainability
Message: Magic number - consider using named constant
Code: ImprovedVolumeBreakoutStrategy(1.3, 0.001),

File: /Users/gogineni/Python/trading-system/core/trading_system.py
Line: 151
Category: maintainability
Message: Magic number - consider using named constant
Code: "NIFTY": 256265,

File: /Users/gogineni/Python/trading-system/core/trading_system.py
Line: 152
Category: maintainability
Message: Magic number - consider using named constant
Code: "BANKNIFTY": 260105,

File: /Users/gogineni/Python/trading-system/core/trading_system.py
Line: 153
Category: maintainability
Message: Magic number - consider using named constant
Code: "FINNIFTY": 9992609,

File: /Users/gogineni/Python/trading-system/core/trading_system.py
Line: 154
Category: maintainability
Message: Magic number - consider using named constant
Code: "MIDCPNIFTY": 12318082,

File: /Users/gogineni/Python/trading-system/core/trading_system.py
Line: 155
Category: maintainability
Message: Magic number - consider using named constant
Code: "SENSEX": 265

File: /Users/gogineni/Python/trading-system/core/trading_system.py
Line: 315
Category: maintainability
Message: Magic number - consider using named constant
Code: trailing_stop = max(trailing_stop, pos['entry_price'] * 1.001)

File: /Users/gogineni/Python/trading-system/core/trading_system.py
Line: 380
Category: maintainability
Message: Magic number - consider using named constant
Code: win_rate = (wins / self.portfolio.trades_count * 100) if self.portfolio.trades_count else 0.0

File: /Users/gogineni/Python/trading-system/core/trading_system.py
Line: 518
Category: maintainability
Message: Magic number - consider using named constant
Code: win_rate = (self.portfolio.winning_trades / self.portfolio.trades_count) * 100

File: /Users/gogineni/Python/trading-system/core/trading_system.py
Line: 576
Category: maintainability
Message: Magic number - consider using named constant
Code: price_change_pct = ((current_price - yesterday_price) / yesterday_price) * 100

File: /Users/gogineni/Python/trading-system/core/trading_system.py
Line: 581
Category: maintainability
Message: Magic number - consider using named constant
Code: volatility = returns.std() * 100

File: /Users/gogineni/Python/trading-system/core/trading_system.py
Line: 1071
Category: maintainability
Message: Magic number - consider using named constant
Code: win_rate = (self.portfolio.winning_trades / self.portfolio.trades_count) * 100

File: /Users/gogineni/Python/trading-system/core/trading_system.py
Line: 1143
Category: maintainability
Message: Magic number - consider using named constant
Code: year = 2000 + int(match.group(3))

File: /Users/gogineni/Python/trading-system/core/trading_system.py
Line: 1633
Category: maintainability
Message: Magic number - consider using named constant
Code: trailing_stop = max(trailing_stop, position["entry_price"] * 1.001)

File: /Users/gogineni/Python/trading-system/core/trading_system.py
Line: 1667
Category: maintainability
Message: Magic number - consider using named constant
Code: pnl_pct = (pnl / self.portfolio.initial_cash) * 100 if self.portfolio.initial_cash else 0

File: /Users/gogineni/Python/trading-system/core/trading_system.py
Line: 1705
Category: maintainability
Message: Magic number - consider using named constant
Code: win_rate = (self.portfolio.winning_trades / self.portfolio.trades_count) * 100

File: /Users/gogineni/Python/trading-system/core/transaction.py
Line: 24
Category: maintainability
Message: Magic number - consider using named constant
Code: portfolio.cash -= 1000

File: /Users/gogineni/Python/trading-system/core/signal_aggregator.py
Line: 81
Category: documentation
Message: Missing docstring
Code: def aggregate_signals(self, strategy_signals: List[Dict], symbol: str,

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 829
Category: documentation
Message: Missing docstring
Code: def is_weekly_expiry(day_value: int) -> bool:

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1454
Category: documentation
Message: Missing docstring
Code: def _infer_instrument_type(self, symbol: str) -> str:

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1458
Category: documentation
Message: Missing docstring
Code: def calculate_transaction_costs(

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1598
Category: documentation
Message: Missing docstring
Code: def _wait_for_order_completion(

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1611
Category: documentation
Message: Missing docstring
Code: def _extract_fill_data(events: List[Dict]) -> Tuple[int, Optional[float], str]:

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1633
Category: documentation
Message: Missing docstring
Code: def check_order_status():

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1732
Category: documentation
Message: Missing docstring
Code: def _place_protective_orders(

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1781
Category: documentation
Message: Missing docstring
Code: def _cancel_protective_orders(self, symbol: str) -> None:

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1816
Category: documentation
Message: Missing docstring
Code: def can_exit_position(self, symbol: str) -> bool:

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1822
Category: documentation
Message: Missing docstring
Code: def validate_trade_pre_execution(

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 43
Category: maintainability
Message: Magic number - consider using named constant
Code: validated_cash = validate_financial_amount(float(raw_cash), min_val=1000.0, max_val=100000000.0)

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 113
Category: maintainability
Message: Magic number - consider using named constant
Code: self.transaction_charges = 0.0000325

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 115
Category: maintainability
Message: Magic number - consider using named constant
Code: self.stt_rate = 0.001

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 461
Category: maintainability
Message: Magic number - consider using named constant
Code: tick = max(0.05, abs(entry_price) * 0.005)

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 710
Category: maintainability
Message: Magic number - consider using named constant
Code: win_rate = (self.winning_trades / self.trades_count * 100) if self.trades_count > 0 else 0

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 787
Category: maintainability
Message: Magic number - consider using named constant
Code: year = 2000 + int(legacy_weekly.group(1))

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 800
Category: maintainability
Message: Magic number - consider using named constant
Code: year = 2000 + int(match.group(1))

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 900
Category: maintainability
Message: Magic number - consider using named constant
Code: pnl_percent = (unrealized_pnl / base_value) * 100

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 997
Category: maintainability
Message: Magic number - consider using named constant
Code: pnl_percent = (trade_pnl / total_basis) * 100

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1267
Category: maintainability
Message: Magic number - consider using named constant
Code: 'win_rate': round(len(winning_trades) / len(trades_with_pnl) * 100, 2) if trades_with_pnl else 0,

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1351
Category: maintainability
Message: Magic number - consider using named constant
Code: min_val=1000.0, max_val=100000000.0

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1355
Category: maintainability
Message: Magic number - consider using named constant
Code: min_val=0.0, max_val=100000000.0

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1473
Category: maintainability
Message: Magic number - consider using named constant
Code: 'brokerage_rate': 0.0002,

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1475
Category: maintainability
Message: Magic number - consider using named constant
Code: 'exchange_charges': 0.0000325,

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1476
Category: maintainability
Message: Magic number - consider using named constant
Code: 'sebi_charges': 0.0000005,

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1477
Category: maintainability
Message: Magic number - consider using named constant
Code: 'stamp_duty_buy': 0.00015,

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1480
Category: maintainability
Message: Magic number - consider using named constant
Code: 'stt_sell': 0.001,

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1485
Category: maintainability
Message: Magic number - consider using named constant
Code: 'exchange_charges': 0.00053,

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1486
Category: maintainability
Message: Magic number - consider using named constant
Code: 'sebi_charges': 0.0000005,

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1487
Category: maintainability
Message: Magic number - consider using named constant
Code: 'stamp_duty_buy': 0.000125,

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1490
Category: maintainability
Message: Magic number - consider using named constant
Code: 'stt_sell': 0.0005,

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1495
Category: maintainability
Message: Magic number - consider using named constant
Code: 'exchange_charges': 0.00053,

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1496
Category: maintainability
Message: Magic number - consider using named constant
Code: 'sebi_charges': 0.0000005,

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1497
Category: maintainability
Message: Magic number - consider using named constant
Code: 'stamp_duty_buy': 0.000125,

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1500
Category: maintainability
Message: Magic number - consider using named constant
Code: 'stt_sell': 0.0005,

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1503
Category: maintainability
Message: Magic number - consider using named constant
Code: 'brokerage_rate': 0.00002,

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1505
Category: maintainability
Message: Magic number - consider using named constant
Code: 'exchange_charges': 0.000035,

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1506
Category: maintainability
Message: Magic number - consider using named constant
Code: 'sebi_charges': 0.0000005,

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1507
Category: maintainability
Message: Magic number - consider using named constant
Code: 'stamp_duty_buy': 0.00002,

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1510
Category: maintainability
Message: Magic number - consider using named constant
Code: 'stt_sell': 0.0001,

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1513
Category: maintainability
Message: Magic number - consider using named constant
Code: 'brokerage_rate': 0.00002,

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1515
Category: maintainability
Message: Magic number - consider using named constant
Code: 'exchange_charges': 0.00005,

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1516
Category: maintainability
Message: Magic number - consider using named constant
Code: 'sebi_charges': 0.0000005,

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1517
Category: maintainability
Message: Magic number - consider using named constant
Code: 'stamp_duty_buy': 0.00002,

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1520
Category: maintainability
Message: Magic number - consider using named constant
Code: 'stt_sell': 0.0001,

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1527
Category: maintainability
Message: Magic number - consider using named constant
Code: cfg['exchange_charges'] = 0.0000326 if instrument_type == 'equity' else 0.0005

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1806
Category: maintainability
Message: Magic number - consider using named constant
Code: slippage = random.uniform(0.001, 0.003)

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1813
Category: maintainability
Message: Magic number - consider using named constant
Code: logger.logger.info(f"üìù [PAPER {side.upper()}] {symbol}: {shares} @ ‚Çπ{execution_price:.2f} (slippage: {slippage*100:.2f}%)")

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1867
Category: maintainability
Message: Magic number - consider using named constant
Code: atr_pct = (current_atr / entry_price) * 100

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1985
Category: maintainability
Message: Magic number - consider using named constant
Code: validate_financial_amount(float(price), min_val=0.01, max_val=1000000.0)

File: /Users/gogineni/Python/trading-system/core/portfolio.py
Line: 1988
Category: maintainability
Message: Magic number - consider using named constant
Code: if shares > 1000000:

File: /Users/gogineni/Python/trading-system/fno/options.py
Line: 42
Category: documentation
Message: Missing docstring
Code: def calculate_greeks(self, spot_price: float, time_to_expiry: float,

File: /Users/gogineni/Python/trading-system/fno/options.py
Line: 56
Category: documentation
Message: Missing docstring
Code: def _norm_pdf(x: float) -> float:

File: /Users/gogineni/Python/trading-system/fno/options.py
Line: 59
Category: documentation
Message: Missing docstring
Code: def _norm_cdf(x: float) -> float:

File: /Users/gogineni/Python/trading-system/fno/options.py
Line: 71
Category: maintainability
Message: Magic number - consider using named constant
Code: ) / 365.0

File: /Users/gogineni/Python/trading-system/fno/options.py
Line: 72
Category: maintainability
Message: Magic number - consider using named constant
Code: self.vega = S * math.sqrt(T) * _norm_pdf(d1) / 100.0

File: /Users/gogineni/Python/trading-system/fno/options.py
Line: 73
Category: maintainability
Message: Magic number - consider using named constant
Code: self.rho = K * T * math.exp(-r * T) * _norm_cdf(d2) / 100.0

File: /Users/gogineni/Python/trading-system/fno/options.py
Line: 80
Category: maintainability
Message: Magic number - consider using named constant
Code: ) / 365.0

File: /Users/gogineni/Python/trading-system/fno/options.py
Line: 81
Category: maintainability
Message: Magic number - consider using named constant
Code: self.vega = S * math.sqrt(T) * _norm_pdf(d1) / 100.0

File: /Users/gogineni/Python/trading-system/fno/options.py
Line: 82
Category: maintainability
Message: Magic number - consider using named constant
Code: self.rho = -K * T * math.exp(-r * T) * _norm_cdf(-d2) / 100.0

File: /Users/gogineni/Python/trading-system/fno/strategies.py
Line: 27
Category: maintainability
Message: Magic number - consider using named constant
Code: return int(capital * risk_per_trade / 100)

File: /Users/gogineni/Python/trading-system/fno/strategies.py
Line: 68
Category: maintainability
Message: Magic number - consider using named constant
Code: expected_move = chain.spot_price * (avg_iv / 100) * (days_to_expiry / 365) ** 0.5

File: /Users/gogineni/Python/trading-system/fno/strategies.py
Line: 93
Category: maintainability
Message: Magic number - consider using named constant
Code: def __init__(self, width: int = 100):

File: /Users/gogineni/Python/trading-system/fno/strategies.py
Line: 163
Category: maintainability
Message: Magic number - consider using named constant
Code: expected_move = chain.spot_price * (avg_iv / 100) * (days_to_expiry / 365) ** 0.5

File: /Users/gogineni/Python/trading-system/fno/terminal.py
Line: 28
Category: maintainability
Message: Magic number - consider using named constant
Code: self.portfolio = portfolio or UnifiedPortfolio(initial_cash=1000000, trading_mode='paper')

File: /Users/gogineni/Python/trading-system/fno/terminal.py
Line: 82
Category: maintainability
Message: Magic number - consider using named constant
Code: print("   17. üîÑ Reset Portfolio to ‚Çπ10,00,000")

File: /Users/gogineni/Python/trading-system/fno/terminal.py
Line: 195
Category: maintainability
Message: Magic number - consider using named constant
Code: f"‚ö†Ô∏è No trades for {max_idle_time/3600:.1f} hours - possible system issue"

File: /Users/gogineni/Python/trading-system/fno/terminal.py
Line: 255
Category: maintainability
Message: Magic number - consider using named constant
Code: points_5k = char.points_needed_for_profit(5000, index_info.lot_size)

File: /Users/gogineni/Python/trading-system/fno/terminal.py
Line: 256
Category: maintainability
Message: Magic number - consider using named constant
Code: points_10k = char.points_needed_for_profit(10000, index_info.lot_size)

File: /Users/gogineni/Python/trading-system/fno/terminal.py
Line: 475
Category: maintainability
Message: Magic number - consider using named constant
Code: 'check_interval': getattr(self, 'check_interval', 300),

File: /Users/gogineni/Python/trading-system/fno/terminal.py
Line: 477
Category: maintainability
Message: Magic number - consider using named constant
Code: 'capital_per_trade': getattr(self, 'capital_per_trade', 200000)

File: /Users/gogineni/Python/trading-system/fno/terminal.py
Line: 551
Category: maintainability
Message: Magic number - consider using named constant
Code: self.portfolio = UnifiedPortfolio(initial_cash=1000000, trading_mode='paper')

File: /Users/gogineni/Python/trading-system/fno/terminal.py
Line: 557
Category: maintainability
Message: Magic number - consider using named constant
Code: self.check_interval = config.get('check_interval', 300)

File: /Users/gogineni/Python/trading-system/fno/terminal.py
Line: 559
Category: maintainability
Message: Magic number - consider using named constant
Code: self.capital_per_trade = config.get('capital_per_trade', 200000)

File: /Users/gogineni/Python/trading-system/fno/terminal.py
Line: 674
Category: maintainability
Message: Magic number - consider using named constant
Code: volatility = abs(day_change / current_price) * 100

File: /Users/gogineni/Python/trading-system/fno/indices.py
Line: 145
Category: documentation
Message: Missing docstring
Code: def calculate_profit_target_points(cls, symbol: str, lot_size: int,

File: /Users/gogineni/Python/trading-system/fno/indices.py
Line: 49
Category: maintainability
Message: Magic number - consider using named constant
Code: avg_daily_move=200,

File: /Users/gogineni/Python/trading-system/fno/indices.py
Line: 57
Category: maintainability
Message: Magic number - consider using named constant
Code: avg_daily_move=115,

File: /Users/gogineni/Python/trading-system/fno/indices.py
Line: 65
Category: maintainability
Message: Magic number - consider using named constant
Code: avg_daily_move=175,

File: /Users/gogineni/Python/trading-system/fno/indices.py
Line: 73
Category: maintainability
Message: Magic number - consider using named constant
Code: avg_daily_move=350,

File: /Users/gogineni/Python/trading-system/fno/indices.py
Line: 81
Category: maintainability
Message: Magic number - consider using named constant
Code: avg_daily_move=275,

File: /Users/gogineni/Python/trading-system/fno/indices.py
Line: 89
Category: maintainability
Message: Magic number - consider using named constant
Code: avg_daily_move=150,

File: /Users/gogineni/Python/trading-system/fno/data_provider.py
Line: 342
Category: documentation
Message: Missing docstring
Code: def get_expiry_date(instrument):

File: /Users/gogineni/Python/trading-system/fno/data_provider.py
Line: 899
Category: documentation
Message: Missing docstring
Code: def _norm_cdf(x: float) -> float:

File: /Users/gogineni/Python/trading-system/fno/data_provider.py
Line: 915
Category: documentation
Message: Missing docstring
Code: def _calculate_option_premium(self, spot_price: float, strike_price: float, time_to_expiry: float,

File: /Users/gogineni/Python/trading-system/fno/data_provider.py
Line: 928
Category: documentation
Message: Missing docstring
Code: def _norm_cdf(x: float) -> float:

File: /Users/gogineni/Python/trading-system/fno/data_provider.py
Line: 165
Category: maintainability
Message: Magic number - consider using named constant
Code: logger.logger.warning(f"‚ö†Ô∏è Skipping {symbol}: price {last_price} outside valid range (0 < price < 100000)")

File: /Users/gogineni/Python/trading-system/fno/data_provider.py
Line: 394
Category: maintainability
Message: Magic number - consider using named constant
Code: 'MIDCPNIFTY': ['MIDCAP NIFTY', 'NIFTY MIDCAP', 'MID CAP NIFTY', 'NIFTY MIDCAP 100', 'MIDCP-NIFTY']

File: /Users/gogineni/Python/trading-system/fno/data_provider.py
Line: 650
Category: maintainability
Message: Magic number - consider using named constant
Code: 'MIDCPNIFTY': 'NIFTY MIDCAP 100',

File: /Users/gogineni/Python/trading-system/fno/data_provider.py
Line: 894
Category: maintainability
Message: Magic number - consider using named constant
Code: sigma = float(volatility) / 100.0

File: /Users/gogineni/Python/trading-system/fno/data_provider.py
Line: 913
Category: maintainability
Message: Magic number - consider using named constant
Code: return max(0.0, spot_price * (volatility / 100.0) * math.sqrt(max(time_to_expiry, 1e-9)))

File: /Users/gogineni/Python/trading-system/fno/data_provider.py
Line: 923
Category: maintainability
Message: Magic number - consider using named constant
Code: sigma = float(volatility) / 100.0

File: /Users/gogineni/Python/trading-system/fno/data_provider.py
Line: 960
Category: maintainability
Message: Magic number - consider using named constant
Code: time_value = spot_price * (volatility / 100.0) * math.sqrt(max(time_to_expiry, 1e-9)) * random.uniform(0.8, 1.2)

File: /Users/gogineni/Python/trading-system/fno/analytics.py
Line: 21
Category: documentation
Message: Missing docstring
Code: def calculate_implied_volatility(self, option: OptionContract, spot_price: float,

File: /Users/gogineni/Python/trading-system/fno/analytics.py
Line: 34
Category: documentation
Message: Missing docstring
Code: def _norm_pdf(x: float) -> float:

File: /Users/gogineni/Python/trading-system/fno/analytics.py
Line: 37
Category: documentation
Message: Missing docstring
Code: def _norm_cdf(x: float) -> float:

File: /Users/gogineni/Python/trading-system/fno/analytics.py
Line: 116
Category: documentation
Message: Missing docstring
Code: def find_optimal_strike(self, chain: OptionChain, strategy: str,

File: /Users/gogineni/Python/trading-system/fno/analytics.py
Line: 263
Category: documentation
Message: Missing docstring
Code: def calculate_theta_decay(self, option: OptionContract, spot_price: float,

File: /Users/gogineni/Python/trading-system/fno/analytics.py
Line: 372
Category: documentation
Message: Missing docstring
Code: def predict_option_price(self, option: OptionContract, market_data: Dict,

File: /Users/gogineni/Python/trading-system/fno/analytics.py
Line: 542
Category: documentation
Message: Missing docstring
Code: def run_backtest(self, strategy: str, index_symbol: str, start_date: str,

File: /Users/gogineni/Python/trading-system/fno/analytics.py
Line: 584
Category: documentation
Message: Missing docstring
Code: def compare_strategies(self, strategies: List[str], index_symbol: str,

File: /Users/gogineni/Python/trading-system/fno/analytics.py
Line: 43
Category: maintainability
Message: Magic number - consider using named constant
Code: max_iterations = 100

File: /Users/gogineni/Python/trading-system/fno/analytics.py
Line: 64
Category: maintainability
Message: Magic number - consider using named constant
Code: return max(0.0, sigma * 100.0)

File: /Users/gogineni/Python/trading-system/fno/analytics.py
Line: 85
Category: maintainability
Message: Magic number - consider using named constant
Code: percentile_rank = (sum(1 for iv in iv_data if iv <= current_iv) / len(iv_data)) * 100

File: /Users/gogineni/Python/trading-system/fno/analytics.py
Line: 104
Category: maintainability
Message: Magic number - consider using named constant
Code: if len(self.historical_iv[symbol]) > 1000:

File: /Users/gogineni/Python/trading-system/fno/analytics.py
Line: 105
Category: maintainability
Message: Magic number - consider using named constant
Code: self.historical_iv[symbol] = self.historical_iv[symbol][-1000:]

File: /Users/gogineni/Python/trading-system/fno/analytics.py
Line: 166
Category: maintainability
Message: Magic number - consider using named constant
Code: if avg_oi > 10000:

File: /Users/gogineni/Python/trading-system/fno/analytics.py
Line: 168
Category: maintainability
Message: Magic number - consider using named constant
Code: elif avg_oi > 5000:

File: /Users/gogineni/Python/trading-system/fno/analytics.py
Line: 170
Category: maintainability
Message: Magic number - consider using named constant
Code: elif avg_oi > 1000:

File: /Users/gogineni/Python/trading-system/fno/analytics.py
Line: 205
Category: maintainability
Message: Magic number - consider using named constant
Code: def find_strikes_for_iron_condor(self, chain: OptionChain, width: int = 100) -> Dict:

File: /Users/gogineni/Python/trading-system/fno/analytics.py
Line: 406
Category: maintainability
Message: Magic number - consider using named constant
Code: 'change_pct': (predicted_price - option.last_price) / option.last_price * 100

File: /Users/gogineni/Python/trading-system/fno/analytics.py
Line: 480
Category: maintainability
Message: Magic number - consider using named constant
Code: win_rate = winning_trades / total_trades * 100

File: /Users/gogineni/Python/trading-system/fno/analytics.py
Line: 492
Category: maintainability
Message: Magic number - consider using named constant
Code: 'win_rate': stats['winning_trades'] / stats['total_trades'] * 100 if stats['total_trades'] > 0 else 0,

File: /Users/gogineni/Python/trading-system/fno/analytics.py
Line: 535
Category: maintainability
Message: Magic number - consider using named constant
Code: def __init__(self, initial_capital: float = 1000000):

File: /Users/gogineni/Python/trading-system/fno/analytics.py
Line: 559
Category: maintainability
Message: Magic number - consider using named constant
Code: 'total_pnl': 125000,

File: /Users/gogineni/Python/trading-system/fno/analytics.py
Line: 560
Category: maintainability
Message: Magic number - consider using named constant
Code: 'max_profit': 25000,

File: /Users/gogineni/Python/trading-system/fno/analytics.py
Line: 561
Category: maintainability
Message: Magic number - consider using named constant
Code: 'max_loss': -15000,

File: /Users/gogineni/Python/trading-system/fno/analytics.py
Line: 562
Category: maintainability
Message: Magic number - consider using named constant
Code: 'avg_profit': 2778,

File: /Users/gogineni/Python/trading-system/fno/analytics.py
Line: 563
Category: maintainability
Message: Magic number - consider using named constant
Code: 'avg_loss': -2941,

File: /Users/gogineni/Python/trading-system/fno/analytics.py
Line: 571
Category: maintainability
Message: Magic number - consider using named constant
Code: 'best_month': '2025-01',

File: /Users/gogineni/Python/trading-system/fno/analytics.py
Line: 572
Category: maintainability
Message: Magic number - consider using named constant
Code: 'worst_month': '2025-03'

File: /Users/gogineni/Python/trading-system/fno/broker.py
Line: 18
Category: maintainability
Message: Magic number - consider using named constant
Code: def __init__(self, initial_margin: float = 100000):

File: /Users/gogineni/Python/trading-system/fno/strategy_selector.py
Line: 307
Category: documentation
Message: Missing docstring
Code: def _validate_signal_strength(self, market_state: str, iv_regime: Dict,

File: /Users/gogineni/Python/trading-system/fno/strategy_selector.py
Line: 346
Category: documentation
Message: Missing docstring
Code: def _select_optimal_strategy(self, market_state: str, iv_regime: Dict,

File: /Users/gogineni/Python/trading-system/fno/strategy_selector.py
Line: 479
Category: documentation
Message: Missing docstring
Code: def _get_strategy_execution_details(self, strategy_name: str, chain: OptionChain,

File: /Users/gogineni/Python/trading-system/fno/strategy_selector.py
Line: 930
Category: documentation
Message: Missing docstring
Code: def _execute_strategy(self, strategy_name: str, execution_details: Dict,

File: /Users/gogineni/Python/trading-system/fno/strategy_selector.py
Line: 162
Category: maintainability
Message: Magic number - consider using named constant
Code: 'percentile': min(100, max(0, (avg_iv - 15) / (35 - 15) * 100))

File: /Users/gogineni/Python/trading-system/fno/strategy_selector.py
Line: 177
Category: maintainability
Message: Magic number - consider using named constant
Code: trend_strength = float(regime_data.get('trend_strength', 0.0) or 0.0) / 100.0

File: /Users/gogineni/Python/trading-system/fno/strategy_selector.py
Line: 187
Category: maintainability
Message: Magic number - consider using named constant
Code: momentum_score = short_slope * 1000

File: /Users/gogineni/Python/trading-system/fno/strategy_selector.py
Line: 799
Category: maintainability
Message: Magic number - consider using named constant
Code: def execute_optimal_strategy(self, index_symbol: str, capital: float = 100000, portfolio: Optional["UnifiedPortfolio"] = None) -> Dict:

File: /Users/gogineni/Python/trading-system/fno/strategy_selector.py
Line: 988
Category: maintainability
Message: Magic number - consider using named constant
Code: logger.logger.info(f"   ‚Ä¢ Risk Amount Used: ‚Çπ{max_loss_per_lot * lots:.2f} ({(max_loss_per_lot * lots / capital * 100):.1f}% of capital)")

File: /Users/gogineni/Python/trading-system/fno/strategy_selector.py
Line: 1222
Category: maintainability
Message: Magic number - consider using named constant
Code: f"   ‚Ä¢ Risk Amount Used: ‚Çπ{max_loss_per_lot * lots:.2f} ({(max_loss_per_lot * lots / capital * 100):.1f}% of capital)"

File: /Users/gogineni/Python/trading-system/utilities/state_managers.py
Line: 37
Category: documentation
Message: Missing docstring
Code: def current_trading_day(self) -> str:

File: /Users/gogineni/Python/trading-system/utilities/state_managers.py
Line: 40
Category: documentation
Message: Missing docstring
Code: def load_state(self) -> Dict:

File: /Users/gogineni/Python/trading-system/utilities/state_managers.py
Line: 50
Category: documentation
Message: Missing docstring
Code: def save_state(self, state: Dict) -> None:

File: /Users/gogineni/Python/trading-system/utilities/state_managers.py
Line: 73
Category: documentation
Message: Missing docstring
Code: def archive_state(self, state: Dict) -> None:

File: /Users/gogineni/Python/trading-system/utilities/state_managers.py
Line: 84
Category: documentation
Message: Missing docstring
Code: def log_trade(self, trade: Dict, trading_day: str = None) -> None:

File: /Users/gogineni/Python/trading-system/utilities/state_managers.py
Line: 95
Category: documentation
Message: Missing docstring
Code: def write_daily_summary(self, trading_day: str, summary: Dict) -> None:

File: /Users/gogineni/Python/trading-system/utilities/state_managers.py
Line: 108
Category: documentation
Message: Missing docstring
Code: class MarketHours:

File: /Users/gogineni/Python/trading-system/utilities/state_managers.py
Line: 114
Category: documentation
Message: Missing docstring
Code: def is_market_open(self) -> bool:

File: /Users/gogineni/Python/trading-system/utilities/state_managers.py
Line: 172
Category: maintainability
Message: Magic number - consider using named constant
Code: hours, remainder = divmod(int(time_diff.total_seconds()), 3600)

File: /Users/gogineni/Python/trading-system/utilities/state_managers.py
Line: 265
Category: maintainability
Message: Magic number - consider using named constant
Code: "initial_cash": 1000000.0,

File: /Users/gogineni/Python/trading-system/utilities/state_managers.py
Line: 266
Category: maintainability
Message: Magic number - consider using named constant
Code: "cash": 1000000.0,

File: /Users/gogineni/Python/trading-system/utilities/state_managers.py
Line: 268
Category: maintainability
Message: Magic number - consider using named constant
Code: "total_value": 1000000.0,

File: /Users/gogineni/Python/trading-system/utilities/logger.py
Line: 69
Category: documentation
Message: Missing docstring
Code: def trade(self, message, *args, **kwargs):

File: /Users/gogineni/Python/trading-system/utilities/dashboard.py
Line: 165
Category: documentation
Message: Missing docstring
Code: def send_completed_trade(self, symbol: str, entry_time: str, entry_price: float, shares: int,

File: /Users/gogineni/Python/trading-system/utilities/dashboard.py
Line: 21
Category: maintainability
Message: Magic number - consider using named constant
Code: self.base_url = base_url or "http://localhost:8080"

File: /Users/gogineni/Python/trading-system/utilities/dashboard.py
Line: 51
Category: maintainability
Message: Magic number - consider using named constant
Code: return response.status_code == 200

File: /Users/gogineni/Python/trading-system/utilities/dashboard.py
Line: 89
Category: maintainability
Message: Magic number - consider using named constant
Code: if response.status_code == 200:

File: /Users/gogineni/Python/trading-system/utilities/market_hours.py
Line: 67
Category: maintainability
Message: Magic number - consider using named constant
Code: hours, remainder = divmod(int(time_diff.total_seconds()), 3600)

File: /Users/gogineni/Python/trading-system/main.py
Line: 127
Category: maintainability
Message: Magic number - consider using named constant
Code: print(f"{i}. {idx:12s} - Points needed: {char.points_needed_for_profit(5000, 50):.0f}-{char.points_needed_for_profit(10000, 50):.0f} pts")

File: /Users/gogineni/Python/trading-system/main.py
Line: 151
Category: maintainability
Message: Magic number - consider using named constant
Code: initial_cash=1000000,

File: /Users/gogineni/Python/trading-system/main.py
Line: 164
Category: maintainability
Message: Magic number - consider using named constant
Code: initial_cash=1000000,

File: /Users/gogineni/Python/trading-system/main.py
Line: 183
Category: maintainability
Message: Magic number - consider using named constant
Code: initial_cash=1000000,

File: /Users/gogineni/Python/trading-system/main.py
Line: 196
Category: maintainability
Message: Magic number - consider using named constant
Code: initial_cash=1000000,

File: /Users/gogineni/Python/trading-system/main.py
Line: 220
Category: maintainability
Message: Magic number - consider using named constant
Code: initial_cash=1000000,

File: /Users/gogineni/Python/trading-system/main.py
Line: 233
Category: maintainability
Message: Magic number - consider using named constant
Code: initial_cash=1000000,

File: /Users/gogineni/Python/trading-system/main.py
Line: 256
Category: maintainability
Message: Magic number - consider using named constant
Code: initial_cash=1000000,

File: /Users/gogineni/Python/trading-system/main.py
Line: 272
Category: maintainability
Message: Magic number - consider using named constant
Code: fno_portfolio.cash = state_data.get('cash', 1000000)

File: /Users/gogineni/Python/trading-system/main.py
Line: 279
Category: maintainability
Message: Magic number - consider using named constant
Code: reset_choice = input("\nüí≠ Reset portfolio to ‚Çπ10,00,000? (yes/no) [no]: ").strip().lower()

File: /Users/gogineni/Python/trading-system/main.py
Line: 281
Category: maintainability
Message: Magic number - consider using named constant
Code: fno_portfolio.initial_cash = 1000000.0

File: /Users/gogineni/Python/trading-system/main.py
Line: 282
Category: maintainability
Message: Magic number - consider using named constant
Code: fno_portfolio.cash = 1000000.0

File: /Users/gogineni/Python/trading-system/main.py
Line: 295
Category: maintainability
Message: Magic number - consider using named constant
Code: print("‚úÖ Portfolio reset to ‚Çπ10,00,000!")

File: /Users/gogineni/Python/trading-system/main.py
Line: 343
Category: maintainability
Message: Magic number - consider using named constant
Code: webbrowser.open("http://localhost:8080")

File: /Users/gogineni/Python/trading-system/main.py
Line: 344
Category: maintainability
Message: Magic number - consider using named constant
Code: logger.info("‚úÖ Dashboard started at: http://localhost:8080")

File: /Users/gogineni/Python/trading-system/main.py
Line: 346
Category: maintainability
Message: Magic number - consider using named constant
Code: logger.info("Dashboard started at: http://localhost:8080 (open manually)")

File: /Users/gogineni/Python/trading-system/main.py
Line: 405
Category: maintainability
Message: Magic number - consider using named constant
Code: dashboard = DashboardConnector(base_url="http://localhost:8080")

File: /Users/gogineni/Python/trading-system/main.py
Line: 408
Category: maintainability
Message: Magic number - consider using named constant
Code: print("üìä Monitor at: http://localhost:8080")
